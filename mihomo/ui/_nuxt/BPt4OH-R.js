import{At as e,B as t,D as n,J as r,K as i,N as a,Ot as o,U as ee,V as te,W as s,X as c,Y as l,_t as ne,et as u,ft as re,ht as d,jt as f,kt as p,lt as m,mt as h,nt as g,q as _,tt as ie,ut as v,x as ae,xt as y}from"./DO0JR7ER.js";import{u as b}from"./CnEnsHnL.js";import{t as oe}from"./CNdGjGfk.js";import{N as x,b as se,d as ce,l as le,n as S,p as ue,t as C,u as de,y as fe}from"./Dq3bNNT9.js";import{t as w}from"./BLNk-Hhf.js";import{t as pe}from"./C7AIHFoL.js";import{t as me}from"./DV20IOiY.js";var he={class:`flex h-full min-h-0 flex-col gap-3`},T={class:`flex shrink-0 items-center gap-3`},E={class:`relative flex-1`},D=[`placeholder`],O={class:`flex gap-2`},k={class:`min-h-0 flex-1 overflow-auto rounded-xl border border-base-content/10 bg-base-200/50`},A={class:`sticky top-0 z-10 bg-base-200`},j={class:`flex items-center gap-2`},M=[`onClick`],N=[`onClick`],P=[`onClick`],F=[`colspan`],I={class:`flex items-center gap-2 text-primary`},L={class:`font-semibold`},R={class:`text-xs text-base-content/60`},ge={key:0,class:`flex flex-col items-center justify-center gap-4 px-4 py-12 text-base-content/40`},_e={class:`flex flex-col gap-5`},ve={class:`flex flex-col gap-2`},z={class:`text-sm font-medium text-base-content/70`},ye={value:`xs`},be={value:`sm`},xe={value:`md`},Se={value:`lg`},Ce={class:`flex flex-col gap-2`},we={class:`text-sm font-medium text-base-content/70`},Te={value:`info`},Ee={value:`error`},De={value:`warning`},Oe={value:`debug`},ke={value:`silent`},Ae={class:`flex flex-col gap-2`},je={class:`text-sm font-medium text-base-content/70`},B=w(ie({__name:`logs`,setup(ie){let{t:w}=ae();a({title:i(()=>w(`logs`))});let B=pe(),V=oe(),H=y(``),U=y();function W(e){return e.match(/^\[([^\]]+)\]/)?.[1]??``}function Me(e){switch(e){case b.Error:return`text-error font-semibold`;case b.Warning:return`text-warning font-semibold`;case b.Info:return`text-info font-semibold`;case b.Debug:return`text-success font-semibold`;default:return``}}let G=[{id:`seq`,label:w(`sequence`),sortable:!0,groupable:!1,render:e=>String(e.seq),sortValue:e=>e.seq},{id:`level`,label:w(`level`),sortable:!0,groupable:!0,render:e=>g(`span`,{class:Me(e.type)},`[${e.type}]`),sortValue:e=>e.type,groupValue:e=>e.type},{id:`type`,label:w(`type`),sortable:!0,groupable:!0,render:e=>g(`span`,{class:`text-base-content/60`},W(e.payload)),sortValue:e=>W(e.payload),groupValue:e=>W(e.payload)||`(empty)`},{id:`payload`,label:w(`payload`),sortable:!1,groupable:!1,render:e=>e.payload}],K=n(`logsTableSortColumn`,`seq`),q=n(`logsTableSortDesc`,!0),J=n(`logsTableGrouping`,null),Y=y({}),X=i(()=>{if(!H.value)return B.logs;let e=H.value.toLowerCase();return B.logs.filter(t=>t.payload.toLowerCase().includes(e)||t.type.toLowerCase().includes(e)||W(t.payload).toLowerCase().includes(e))}),Z=i(()=>{let e=G.find(e=>e.id===K.value);return e?.sortValue?[...X.value].sort((t,n)=>{let r=e.sortValue(t),i=e.sortValue(n),a=0;return typeof r==`number`&&typeof i==`number`?a=r-i:typeof r==`string`&&typeof i==`string`&&(a=r.localeCompare(i)),q.value?-a:a}):X.value}),Ne=i(()=>J.value?G.find(e=>e.id===J.value):null),Q=i(()=>{let e=Ne.value;if(!e?.groupValue)return Z.value.map(e=>({type:`data`,original:e}));let t=new Map;for(let n of Z.value){let r=e.groupValue(n),i=t.get(r);i?i.push(n):t.set(r,[n])}let n=[];for(let[e,r]of t)if(n.push({type:`group`,key:e,subRows:r}),Y.value[e])for(let e of r)n.push({type:`data`,original:e});return n});function Pe(e){return G.find(t=>t.id===e)?.sortable??!1}function $(e){return K.value===e}function Fe(e){G.find(t=>t.id===e)?.sortable&&(K.value===e?q.value?q.value=!1:(K.value=``,q.value=!0):(K.value=e,q.value=!0))}function Ie(e){J.value===e?J.value=null:J.value=e,Y.value={}}function Le(e){Y.value[e]=!Y.value[e]}let Re=i(()=>V.tableSizeClassName(V.logsTableSize));return(n,i)=>{let a=me;return m(),c(`div`,he,[_(`div`,T,[_(`div`,E,[u(o(ue),{class:`pointer-events-none absolute top-1/2 left-3.5 -translate-y-1/2 text-base-content/40`,size:18}),d(_(`input`,{"onUpdate:modelValue":i[0]||=e=>ne(H)?H.value=e:null,type:`search`,class:`w-full rounded-lg border border-base-content/10 bg-base-200/60 py-2.5 pr-3.5 pl-10 text-sm text-base-content transition-all duration-200 placeholder:text-base-content/40 focus:border-primary focus:bg-base-100 focus:ring-3 focus:ring-primary/15 focus:outline-none`,placeholder:o(w)(`search`)},null,8,D),[[te,o(H)]])]),_(`div`,O,[_(`button`,{class:p([`flex h-9 w-9 cursor-pointer items-center justify-center rounded-lg border border-base-content/10 bg-base-200/60 text-base-content transition-all duration-200 hover:border-base-content/20 hover:bg-base-300`,{"border-warning/30 bg-warning/15 text-warning":o(B).paused}]),onClick:i[1]||=e=>o(B).togglePaused()},[o(B).paused?(m(),r(o(fe),{key:1,size:18})):(m(),r(o(se),{key:0,size:18}))],2),_(`button`,{class:`flex h-9 w-9 cursor-pointer items-center justify-center rounded-lg border border-base-content/10 bg-base-200/60 text-base-content transition-all duration-200 hover:border-base-content/20 hover:bg-base-300`,onClick:i[2]||=e=>o(U)?.open()},[u(o(ce),{size:18})])])]),_(`div`,k,[_(`table`,{class:p([`table w-full border-collapse whitespace-nowrap`,o(Re)])},[_(`thead`,null,[_(`tr`,A,[(m(),c(s,null,v(G,e=>_(`th`,{key:e.id,class:`border-b border-base-content/10 text-left font-semibold text-base-content`},[_(`div`,j,[_(`div`,{class:p([`flex-1`,{"cursor-pointer select-none hover:text-primary":Pe(e.id)}]),onClick:t=>Fe(e.id)},f(e.label),11,M),$(e.id)&&!o(q)?(m(),r(o(de),{key:0,class:`text-primary`,size:16})):$(e.id)&&o(q)?(m(),r(o(le),{key:1,class:`text-primary`,size:16})):l(``,!0),e.groupable?(m(),c(`button`,{key:2,class:`flex cursor-pointer items-center justify-center border-none bg-transparent p-1 text-base-content/60 transition-colors duration-200 hover:text-primary`,onClick:ee(t=>Ie(e.id),[`stop`])},[o(J)===e.id?(m(),r(o(C),{key:0,size:16})):(m(),r(o(S),{key:1,size:16}))],8,N)):l(``,!0)])])),64))])]),_(`tbody`,null,[(m(!0),c(s,null,v(o(Q),(t,n)=>(m(),c(s,{key:t.type===`group`?`group-${t.key}`:t.original.seq},[t.type===`group`?(m(),c(`tr`,{key:0,class:`cursor-pointer bg-primary/5 hover:bg-primary/10`,onClick:e=>Le(t.key)},[_(`td`,{colspan:G.length,class:`border-b border-base-content/10`},[_(`div`,I,[o(Y)[t.key]?(m(),r(o(C),{key:0,size:16})):(m(),r(o(S),{key:1,size:16})),_(`span`,L,f(t.key),1),_(`span`,R,`(`+f(t.subRows.length)+`)`,1)])],8,F)],8,P)):(m(),c(`tr`,{key:1,class:`animate-fade-in transition-colors duration-150 hover:bg-base-content/5`,style:e({animationDelay:`${n%20*15}ms`})},[(m(),c(s,null,v(G,e=>_(`td`,{key:e.id,class:`border-b border-base-content/5`},[(m(),r(re(()=>e.render(t.original))))])),64))],4))],64))),128))])],2),o(Q).length===0?(m(),c(`div`,ge,[u(o(x),{size:48,class:`opacity-50`}),_(`span`,null,f(o(w)(`noData`)),1)])):l(``,!0)]),u(a,{ref_key:`settingsModal`,ref:U,title:o(w)(`logsSettings`)},{icon:h(()=>[u(o(x),{size:24})]),default:h(()=>[_(`div`,_e,[_(`div`,ve,[_(`label`,z,f(o(w)(`tableSize`)),1),d(_(`select`,{"onUpdate:modelValue":i[3]||=e=>o(V).logsTableSize=e,class:`w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none`},[_(`option`,ye,f(o(w)(`xs`)),1),_(`option`,be,f(o(w)(`sm`)),1),_(`option`,xe,f(o(w)(`md`)),1),_(`option`,Se,f(o(w)(`lg`)),1)],512),[[t,o(V).logsTableSize]])]),_(`div`,Ce,[_(`label`,we,f(o(w)(`logLevel`)),1),d(_(`select`,{"onUpdate:modelValue":i[4]||=e=>o(V).logLevel=e,class:`w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none`},[_(`option`,Te,f(o(w)(`info`)),1),_(`option`,Ee,f(o(w)(`error`)),1),_(`option`,De,f(o(w)(`warning`)),1),_(`option`,Oe,f(o(w)(`debug`)),1),_(`option`,ke,f(o(w)(`silent`)),1)],512),[[t,o(V).logLevel]])]),_(`div`,Ae,[_(`label`,je,f(o(w)(`logMaxRows`)),1),d(_(`select`,{"onUpdate:modelValue":i[5]||=e=>o(V).logMaxRows=e,class:`w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none`},[...i[6]||=[_(`option`,{value:200},`200`,-1),_(`option`,{value:300},`300`,-1),_(`option`,{value:500},`500`,-1),_(`option`,{value:800},`800`,-1),_(`option`,{value:1e3},`1000`,-1)]],512),[[t,o(V).logMaxRows]])])])]),_:1},8,[`title`])])}}}),[[`__scopeId`,`data-v-d01ccdcc`]]);export{B as default};