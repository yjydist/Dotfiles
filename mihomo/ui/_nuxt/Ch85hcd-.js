import{C as e,L as t,xt as n}from"./DO0JR7ER.js";import{u as r}from"./CnEnsHnL.js";var i=class extends Error{response;request;options;constructor(e,t,n){let r=`${e.status||e.status===0?e.status:``} ${e.statusText??``}`.trim(),i=r?`status code ${r}`:`an unknown error`;super(`Request failed with ${i}: ${t.method} ${t.url}`),this.name=`HTTPError`,this.response=e,this.request=t,this.options=n}},a=class extends Error{name=`NonError`;value;constructor(e){let t=`Non-error value was thrown`;try{typeof e==`string`?t=e:e&&typeof e==`object`&&`message`in e&&typeof e.message==`string`&&(t=e.message)}catch{}super(t),this.value=e}},o=class extends Error{name=`ForceRetryError`;customDelay;code;customRequest;constructor(e){let t=e?.cause?e.cause instanceof Error?e.cause:new a(e.cause):void 0;super(e?.code?`Forced retry: ${e.code}`:`Forced retry`,t?{cause:t}:void 0),this.customDelay=e?.delay,this.code=e?.code,this.customRequest=e?.request}};const s=(()=>{let e=!1,t=!1,n=typeof globalThis.ReadableStream==`function`,r=typeof globalThis.Request==`function`;if(n&&r)try{t=new globalThis.Request(`https://empty.invalid`,{body:new globalThis.ReadableStream,method:`POST`,get duplex(){return e=!0,`half`}}).headers.has(`Content-Type`)}catch(e){if(e instanceof Error&&e.message===`unsupported BodyInit type`)return!1;throw e}return e&&!t})(),c=typeof globalThis.AbortController==`function`,l=typeof globalThis.AbortSignal==`function`&&typeof globalThis.AbortSignal.any==`function`,u=typeof globalThis.ReadableStream==`function`,d=typeof globalThis.FormData==`function`,f=[`get`,`post`,`put`,`patch`,`head`,`delete`],p={json:`application/json`,text:`text/*`,formData:`multipart/form-data`,arrayBuffer:`*/*`,blob:`*/*`,bytes:`*/*`},m=2147483647,ee=new TextEncoder().encode(`------WebKitFormBoundaryaxpyiPgbbPti10Rw`).length,h=Symbol(`stop`);var g=class{options;constructor(e){this.options=e}};const _=e=>new g(e),v={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0,context:!0},y={next:!0},b={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,duplex:!0},x=e=>{if(!e)return 0;if(e instanceof FormData){let t=0;for(let[n,r]of e)t+=ee,t+=new TextEncoder().encode(`Content-Disposition: form-data; name="${n}"`).length,t+=typeof r==`string`?new TextEncoder().encode(r).length:r.size;return t}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(typeof e==`string`)return new TextEncoder().encode(e).length;if(e instanceof URLSearchParams)return new TextEncoder().encode(e.toString()).length;if(`byteLength`in e)return e.byteLength;if(typeof e==`object`&&e)try{let t=JSON.stringify(e);return new TextEncoder().encode(t).length}catch{return 0}return 0};var S=(e,t,n)=>{let r,i=0;return e.pipeThrough(new TransformStream({transform(e,a){if(a.enqueue(e),r){i+=r.byteLength;let e=t===0?0:i/t;e>=1&&(e=1-2**-52),n?.({percent:e,totalBytes:Math.max(t,i),transferredBytes:i},r)}r=e},flush(){r&&(i+=r.byteLength,n?.({percent:1,totalBytes:Math.max(t,i),transferredBytes:i},r))}}))};const te=(e,t)=>{if(!e.body)return e;if(e.status===204)return new Response(null,{status:e.status,statusText:e.statusText,headers:e.headers});let n=Math.max(0,Number(e.headers.get(`content-length`))||0);return new Response(S(e.body,n,t),{status:e.status,statusText:e.statusText,headers:e.headers})},ne=(e,t,n)=>{if(!e.body)return e;let r=x(n??e.body);return new Request(e,{duplex:`half`,body:S(e.body,r,t)})},C=e=>typeof e==`object`&&!!e,w=(...e)=>{for(let t of e)if((!C(t)||Array.isArray(t))&&t!==void 0)throw TypeError("The `options` argument must be an object");return O({},...e)},T=(e={},t={})=>{let n=new globalThis.Headers(e),r=t instanceof globalThis.Headers,i=new globalThis.Headers(t);for(let[e,t]of i.entries())r&&t===`undefined`||t===void 0?n.delete(e):n.set(e,t);return n};function E(e,t,n){return Object.hasOwn(t,n)&&t[n]===void 0?[]:O(e[n]??[],t[n]??[])}const D=(e={},t={})=>({beforeRequest:E(e,t,`beforeRequest`),beforeRetry:E(e,t,`beforeRetry`),afterResponse:E(e,t,`afterResponse`),beforeError:E(e,t,`beforeError`)});var re=(e,t)=>{let n=new URLSearchParams;for(let r of[e,t])if(r!==void 0)if(r instanceof URLSearchParams)for(let[e,t]of r.entries())n.append(e,t);else if(Array.isArray(r))for(let e of r){if(!Array.isArray(e)||e.length!==2)throw TypeError(`Array search parameters must be provided in [[key, value], ...] format`);n.append(String(e[0]),String(e[1]))}else if(C(r))for(let[e,t]of Object.entries(r))t!==void 0&&n.append(e,String(t));else{let e=new URLSearchParams(r);for(let[t,r]of e.entries())n.append(t,r)}return n};const O=(...e)=>{let t={},n={},r={},i,a=[];for(let o of e)if(Array.isArray(o))Array.isArray(t)||(t=[]),t=[...t,...o];else if(C(o)){for(let[e,n]of Object.entries(o)){if(e===`signal`&&n instanceof globalThis.AbortSignal){a.push(n);continue}if(e===`context`){if(n!=null&&(!C(n)||Array.isArray(n)))throw TypeError("The `context` option must be an object");t={...t,context:n==null?{}:{...t.context,...n}};continue}if(e===`searchParams`){i=n==null?void 0:i===void 0?n:re(i,n);continue}C(n)&&e in t&&(n=O(t[e],n)),t={...t,[e]:n}}C(o.hooks)&&(r=D(r,o.hooks),t.hooks=r),C(o.headers)&&(n=T(n,o.headers),t.headers=n)}return i!==void 0&&(t.searchParams=i),a.length>0&&(a.length===1?t.signal=a[0]:l?t.signal=AbortSignal.any(a):t.signal=a.at(-1)),t},ie=e=>f.includes(e)?e.toUpperCase():e;var k={limit:2,methods:[`get`,`put`,`head`,`delete`,`options`,`trace`],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:1/0,backoffLimit:1/0,delay:e=>.3*2**(e-1)*1e3,jitter:void 0,retryOnTimeout:!1};const ae=(e={})=>{if(typeof e==`number`)return{...k,limit:e};if(e.methods&&!Array.isArray(e.methods))throw Error(`retry.methods must be an array`);if(e.methods&&=e.methods.map(e=>e.toLowerCase()),e.statusCodes&&!Array.isArray(e.statusCodes))throw Error(`retry.statusCodes must be an array`);let t=Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0));return{...k,...t}};var A=class extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name=`TimeoutError`,this.request=e}};async function oe(e,t,n,r){return new Promise((i,a)=>{let o=setTimeout(()=>{n&&n.abort(),a(new A(e))},r.timeout);r.fetch(e,t).then(i).catch(a).then(()=>{clearTimeout(o)})})}async function j(e,{signal:t}){return new Promise((n,r)=>{t&&(t.throwIfAborted(),t.addEventListener(`abort`,i,{once:!0}));function i(){clearTimeout(a),r(t.reason)}let a=setTimeout(()=>{t?.removeEventListener(`abort`,i),n()},e)})}const M=(e,t)=>{let n={};for(let r in t)Object.hasOwn(t,r)&&!(r in b)&&!(r in v)&&(!(r in e)||r in y)&&(n[r]=t[r]);return n},N=e=>e===void 0?!1:Array.isArray(e)?e.length>0:e instanceof URLSearchParams?e.size>0:typeof e==`object`?Object.keys(e).length>0:typeof e==`string`?e.trim().length>0:!!e;function P(e){return e instanceof i||e?.name===i.name}function F(e){return e instanceof A||e?.name===A.name}var I=class e{static create(t,n){let r=new e(t,n),a=r.#p(async()=>{if(typeof r.#i.timeout==`number`&&r.#i.timeout>2147483647)throw RangeError(`The \`timeout\` option cannot be greater than ${m}`);await Promise.resolve();let e=await r.#m();for(let t of r.#i.hooks.afterResponse){let n=r.#u(e.clone()),i;try{i=await t(r.request,r.#h(),n,{retryCount:r.#n})}catch(t){throw r.#f(n),r.#f(e),t}if(i instanceof g)throw r.#f(n),r.#f(e),new o(i.options);let a=i instanceof globalThis.Response?i:e;n!==a&&r.#f(n),e!==a&&r.#f(e),e=a}if(r.#u(e),!e.ok&&(typeof r.#i.throwHttpErrors==`function`?r.#i.throwHttpErrors(e.status):r.#i.throwHttpErrors)){let t=new i(e,r.request,r.#h());for(let e of r.#i.hooks.beforeError)t=await e(t,{retryCount:r.#n});throw t}if(r.#i.onDownloadProgress){if(typeof r.#i.onDownloadProgress!=`function`)throw TypeError("The `onDownloadProgress` option must be a function");if(!u)throw Error("Streams are not supported in your environment. `ReadableStream` is missing.");let t=e.clone();return r.#f(e),te(t,r.#i.onDownloadProgress)}return e}).finally(()=>{let e=r.#a;r.#d(e?.body??void 0),r.#d(r.request.body??void 0)});for(let[e,t]of Object.entries(p))e===`bytes`&&typeof globalThis.Response?.prototype?.bytes!=`function`||(a[e]=async()=>{r.request.headers.set(`accept`,r.request.headers.get(`accept`)||t);let i=await a;if(e===`json`){if(i.status===204)return``;let e=await i.text();return e===``?``:n.parseJson?n.parseJson(e):JSON.parse(e)}return i[e]()});return a}static#e(e){return e&&typeof e==`object`&&!Array.isArray(e)&&!(e instanceof URLSearchParams)?Object.fromEntries(Object.entries(e).filter(([,e])=>e!==void 0)):e}request;#t;#n=0;#r;#i;#a;#o;#s;constructor(t,n={}){if(this.#r=t,this.#i={...n,headers:T(this.#r.headers,n.headers),hooks:D({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},n.hooks),method:ie(n.method??this.#r.method??`GET`),prefixUrl:String(n.prefixUrl||``),retry:ae(n.retry),throwHttpErrors:n.throwHttpErrors??!0,timeout:n.timeout??1e4,fetch:n.fetch??globalThis.fetch.bind(globalThis),context:n.context??{}},typeof this.#r!=`string`&&!(this.#r instanceof URL||this.#r instanceof globalThis.Request))throw TypeError("`input` must be a string, URL, or Request");if(this.#i.prefixUrl&&typeof this.#r==`string`){if(this.#r.startsWith(`/`))throw Error("`input` must not begin with a slash when using `prefixUrl`");this.#i.prefixUrl.endsWith(`/`)||(this.#i.prefixUrl+=`/`),this.#r=this.#i.prefixUrl+this.#r}c&&l&&(this.#o=this.#i.signal??this.#r.signal,this.#t=new globalThis.AbortController,this.#i.signal=this.#o?AbortSignal.any([this.#o,this.#t.signal]):this.#t.signal),s&&(this.#i.duplex=`half`),this.#i.json!==void 0&&(this.#i.body=this.#i.stringifyJson?.(this.#i.json)??JSON.stringify(this.#i.json),this.#i.headers.set(`content-type`,this.#i.headers.get(`content-type`)??`application/json`));let r=n.headers&&new globalThis.Headers(n.headers).has(`content-type`);if(this.#r instanceof globalThis.Request&&(d&&this.#i.body instanceof globalThis.FormData||this.#i.body instanceof URLSearchParams)&&!r&&this.#i.headers.delete(`content-type`),this.request=new globalThis.Request(this.#r,this.#i),N(this.#i.searchParams)){let t=`?`+(typeof this.#i.searchParams==`string`?this.#i.searchParams.replace(/^\?/,``):new URLSearchParams(e.#e(this.#i.searchParams)).toString()),n=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);this.request=new globalThis.Request(n,this.#i)}if(this.#i.onUploadProgress){if(typeof this.#i.onUploadProgress!=`function`)throw TypeError("The `onUploadProgress` option must be a function");if(!s)throw Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request=this.#_(this.request,this.#i.body??void 0)}}#c(){let e=this.#i.retry.delay(this.#n),t=e;this.#i.retry.jitter===!0?t=Math.random()*e:typeof this.#i.retry.jitter==`function`&&(t=this.#i.retry.jitter(e),(!Number.isFinite(t)||t<0)&&(t=e));let n=this.#i.retry.backoffLimit??1/0;return Math.min(n,t)}async#l(e){if(this.#n++,this.#n>this.#i.retry.limit)throw e;let t=e instanceof Error?e:new a(e);if(t instanceof o)return t.customDelay??this.#c();if(!this.#i.retry.methods.includes(this.request.method.toLowerCase()))throw e;if(this.#i.retry.shouldRetry!==void 0){let n=await this.#i.retry.shouldRetry({error:t,retryCount:this.#n});if(n===!1)throw e;if(n===!0)return this.#c()}if(F(e)&&!this.#i.retry.retryOnTimeout)throw e;if(P(e)){if(!this.#i.retry.statusCodes.includes(e.response.status))throw e;let t=e.response.headers.get(`Retry-After`)??e.response.headers.get(`RateLimit-Reset`)??e.response.headers.get(`X-RateLimit-Retry-After`)??e.response.headers.get(`X-RateLimit-Reset`)??e.response.headers.get(`X-Rate-Limit-Reset`);if(t&&this.#i.retry.afterStatusCodes.includes(e.response.status)){let e=Number(t)*1e3;Number.isNaN(e)?e=Date.parse(t)-Date.now():e>=Date.parse(`2024-01-01`)&&(e-=Date.now());let n=this.#i.retry.maxRetryAfter??e;return e<n?e:n}if(e.response.status===413)throw e}return this.#c()}#u(e){return this.#i.parseJson&&(e.json=async()=>this.#i.parseJson(await e.text())),e}#d(e){e&&e.cancel().catch(()=>void 0)}#f(e){this.#d(e.body??void 0)}async#p(e){try{return await e()}catch(t){let n=Math.min(await this.#l(t),m);if(this.#n<1)throw t;if(await j(n,this.#o?{signal:this.#o}:{}),t instanceof o&&t.customRequest){let e=this.#i.signal?new globalThis.Request(t.customRequest,{signal:this.#i.signal}):new globalThis.Request(t.customRequest);this.#g(e)}for(let e of this.#i.hooks.beforeRetry){let n=await e({request:this.request,options:this.#h(),error:t,retryCount:this.#n});if(n instanceof globalThis.Request){this.#g(n);break}if(n instanceof globalThis.Response)return n;if(n===h)return}return this.#p(e)}}async#m(){this.#t?.signal.aborted&&(this.#t=new globalThis.AbortController,this.#i.signal=this.#o?AbortSignal.any([this.#o,this.#t.signal]):this.#t.signal,this.request=new globalThis.Request(this.request,{signal:this.#i.signal}));for(let e of this.#i.hooks.beforeRequest){let t=await e(this.request,this.#h(),{retryCount:this.#n});if(t instanceof Response)return t;if(t instanceof globalThis.Request){this.#g(t);break}}let e=M(this.request,this.#i);return this.#a=this.request,this.request=this.#a.clone(),this.#i.timeout===!1?this.#i.fetch(this.#a,e):oe(this.#a,e,this.#t,this.#i)}#h(){if(!this.#s){let{hooks:e,...t}=this.#i;this.#s=Object.freeze(t)}return this.#s}#g(e){this.#s=void 0,this.request=this.#_(e)}#_(e,t){return!this.#i.onUploadProgress||!e.body?e:ne(e,this.#i.onUploadProgress,t??this.#i.body??void 0)}},L=e=>{let t=(t,n)=>I.create(t,w(e,n));for(let n of f)t[n]=(t,r)=>I.create(t,w(e,r,{method:n}));return t.create=e=>L(w(e)),t.extend=t=>(typeof t==`function`&&(t=t(e??{})),L(w(e,t))),t.stop=h,t.retry=_,t},R=L();const z={meta:!0,version:`v1.18.0`},B={port:7890,"socks-port":7891,"redir-port":0,"tproxy-port":0,"mixed-port":7893,mode:`rule`,"log-level":`info`,"allow-lan":!1,ipv6:!1,tun:{enable:!1,device:`utun`,stack:`system`,"dns-hijack":null,"auto-route":!0,"auto-detect-interface":!0,"file-descriptor":0}};function V(e,t,n=``){return{network:`tcp`,type:`HTTP Connect`,destinationIP:t,destinationPort:`443`,dnsMode:`normal`,host:e,inboundIP:`127.0.0.1`,inboundName:`mixed-in`,inboundPort:`7893`,inboundUser:``,process:n,processPath:n?`/Applications/${n}.app`:``,remoteDestination:``,sniffHost:e,sourceIP:`192.168.1.100`,sourcePort:`52341`,specialProxy:``,specialRules:``,uid:501}}function H(e,t,n,r,i){return{name:e,type:t,all:r||[],history:n?[{delay:n,time:new Date().toISOString()}]:[],udp:!0,xudp:t===`Hysteria2`||t===`VLESS`,tfo:!1,extra:{},hidden:!1,now:i||``}}function U(e,t,n){return{name:e,type:t,alive:!0,tfo:!1,udp:!0,xudp:!1,now:``,id:e,extra:{},history:n?[{delay:n,time:new Date().toISOString()}]:[]}}const W={DIRECT:H(`DIRECT`,`Direct`),REJECT:H(`REJECT`,`Reject`),"Hong Kong":H(`Hong Kong`,`Shadowsocks`,85),Japan:H(`Japan`,`Vmess`,120),Singapore:H(`Singapore`,`Trojan`,65),"United States":H(`United States`,`Hysteria2`,180),Taiwan:H(`Taiwan`,`VLESS`,95),"Auto Select":H(`Auto Select`,`URLTest`,void 0,[`Hong Kong`,`Japan`,`Singapore`,`United States`,`Taiwan`],`Singapore`),Proxy:H(`Proxy`,`Selector`,void 0,[`Auto Select`,`Hong Kong`,`Japan`,`Singapore`,`United States`,`Taiwan`,`DIRECT`],`Auto Select`),Streaming:H(`Streaming`,`Selector`,void 0,[`Proxy`,`Hong Kong`,`Japan`,`Singapore`,`Taiwan`,`DIRECT`],`Japan`),"AI Services":H(`AI Services`,`Selector`,void 0,[`Proxy`,`United States`,`Japan`,`Singapore`],`United States`)},G={"Provider A":{name:`Provider A`,type:`Proxy`,vehicleType:`HTTP`,testUrl:`https://www.gstatic.com/generate_204`,proxies:[U(`Hong Kong`,`Shadowsocks`,85),U(`Japan`,`Vmess`,120),U(`Singapore`,`Trojan`,65)],updatedAt:new Date().toISOString(),subscriptionInfo:{Upload:1024*1024*100,Download:1024*1024*500,Total:1024*1024*1024*100,Expire:Math.floor(Date.now()/1e3)+720*60*60}},"Provider B":{name:`Provider B`,type:`Proxy`,vehicleType:`File`,testUrl:`https://www.gstatic.com/generate_204`,proxies:[U(`United States`,`Hysteria2`,180),U(`Taiwan`,`VLESS`,95)],updatedAt:new Date(Date.now()-1440*60*1e3).toISOString(),subscriptionInfo:{Upload:1024*1024*50,Download:1024*1024*200,Total:1024*1024*1024*50,Expire:Math.floor(Date.now()/1e3)+1440*60*60}}},K=q();function q(){return[{type:`DOMAIN-SUFFIX`,payload:`google.com`,proxy:`Proxy`,size:156},{type:`DOMAIN-SUFFIX`,payload:`googleapis.com`,proxy:`Proxy`,size:89},{type:`DOMAIN-SUFFIX`,payload:`gstatic.com`,proxy:`Proxy`,size:234},{type:`DOMAIN-SUFFIX`,payload:`github.com`,proxy:`Proxy`,size:178},{type:`DOMAIN-SUFFIX`,payload:`githubusercontent.com`,proxy:`Proxy`,size:445},{type:`DOMAIN-SUFFIX`,payload:`openai.com`,proxy:`AI Services`,size:67},{type:`DOMAIN-SUFFIX`,payload:`anthropic.com`,proxy:`AI Services`,size:34},{type:`DOMAIN-SUFFIX`,payload:`claude.ai`,proxy:`AI Services`,size:23},{type:`DOMAIN-SUFFIX`,payload:`netflix.com`,proxy:`Streaming`,size:512},{type:`DOMAIN-SUFFIX`,payload:`nflxvideo.net`,proxy:`Streaming`,size:1024},{type:`DOMAIN-SUFFIX`,payload:`youtube.com`,proxy:`Streaming`,size:789},{type:`DOMAIN-SUFFIX`,payload:`ytimg.com`,proxy:`Streaming`,size:456},{type:`DOMAIN-SUFFIX`,payload:`googlevideo.com`,proxy:`Streaming`,size:2048},{type:`DOMAIN-SUFFIX`,payload:`twitter.com`,proxy:`Proxy`,size:345},{type:`DOMAIN-SUFFIX`,payload:`x.com`,proxy:`Proxy`,size:123},{type:`DOMAIN-SUFFIX`,payload:`twimg.com`,proxy:`Proxy`,size:567},{type:`DOMAIN-SUFFIX`,payload:`facebook.com`,proxy:`Proxy`,size:890},{type:`DOMAIN-SUFFIX`,payload:`fbcdn.net`,proxy:`Proxy`,size:1234},{type:`DOMAIN-SUFFIX`,payload:`instagram.com`,proxy:`Proxy`,size:678},{type:`DOMAIN-SUFFIX`,payload:`cdninstagram.com`,proxy:`Proxy`,size:901},{type:`DOMAIN-SUFFIX`,payload:`telegram.org`,proxy:`Proxy`,size:234},{type:`DOMAIN-SUFFIX`,payload:`t.me`,proxy:`Proxy`,size:56},{type:`DOMAIN-SUFFIX`,payload:`whatsapp.com`,proxy:`Proxy`,size:345},{type:`DOMAIN-SUFFIX`,payload:`discord.com`,proxy:`Proxy`,size:456},{type:`DOMAIN-SUFFIX`,payload:`discordapp.com`,proxy:`Proxy`,size:567},{type:`DOMAIN-SUFFIX`,payload:`spotify.com`,proxy:`Streaming`,size:678},{type:`DOMAIN-SUFFIX`,payload:`scdn.co`,proxy:`Streaming`,size:789},{type:`DOMAIN-SUFFIX`,payload:`twitch.tv`,proxy:`Streaming`,size:890},{type:`DOMAIN-SUFFIX`,payload:`ttvnw.net`,proxy:`Streaming`,size:1567},{type:`DOMAIN-SUFFIX`,payload:`reddit.com`,proxy:`Proxy`,size:234},{type:`DOMAIN-SUFFIX`,payload:`redd.it`,proxy:`Proxy`,size:123},{type:`DOMAIN-SUFFIX`,payload:`medium.com`,proxy:`Proxy`,size:345},{type:`DOMAIN-SUFFIX`,payload:`wikipedia.org`,proxy:`Proxy`,size:456},{type:`DOMAIN-SUFFIX`,payload:`wikimedia.org`,proxy:`Proxy`,size:567},{type:`DOMAIN-KEYWORD`,payload:`google`,proxy:`Proxy`,size:12},{type:`DOMAIN-KEYWORD`,payload:`facebook`,proxy:`Proxy`,size:8},{type:`DOMAIN-KEYWORD`,payload:`youtube`,proxy:`Streaming`,size:6},{type:`DOMAIN-KEYWORD`,payload:`twitter`,proxy:`Proxy`,size:5},{type:`DOMAIN-KEYWORD`,payload:`netflix`,proxy:`Streaming`,size:4},{type:`GEOIP`,payload:`CN`,proxy:`DIRECT`,size:8945},{type:`GEOIP`,payload:`PRIVATE`,proxy:`DIRECT`,size:156},{type:`IP-CIDR`,payload:`192.168.0.0/16`,proxy:`DIRECT`,size:1},{type:`IP-CIDR`,payload:`10.0.0.0/8`,proxy:`DIRECT`,size:1},{type:`IP-CIDR`,payload:`172.16.0.0/12`,proxy:`DIRECT`,size:1},{type:`IP-CIDR`,payload:`127.0.0.0/8`,proxy:`DIRECT`,size:1},{type:`IP-CIDR`,payload:`100.64.0.0/10`,proxy:`DIRECT`,size:1},{type:`IP-CIDR6`,payload:`::1/128`,proxy:`DIRECT`,size:1},{type:`IP-CIDR6`,payload:`fc00::/7`,proxy:`DIRECT`,size:1},{type:`IP-CIDR6`,payload:`fe80::/10`,proxy:`DIRECT`,size:1},{type:`PROCESS-NAME`,payload:`Telegram`,proxy:`Proxy`,size:1},{type:`PROCESS-NAME`,payload:`Discord`,proxy:`Proxy`,size:1},{type:`PROCESS-NAME`,payload:`Spotify`,proxy:`Streaming`,size:1},{type:`RULE-SET`,payload:`reject`,proxy:`REJECT`,size:1234},{type:`RULE-SET`,payload:`direct`,proxy:`DIRECT`,size:5678},{type:`RULE-SET`,payload:`proxy`,proxy:`Proxy`,size:2345},{type:`MATCH`,payload:``,proxy:`Proxy`,size:1}]}const se={reject:{name:`reject`,type:`Rule`,behavior:`domain`,ruleCount:1234,updatedAt:new Date().toISOString(),vehicleType:`HTTP`,format:`yaml`},direct:{name:`direct`,type:`Rule`,behavior:`domain`,ruleCount:5678,updatedAt:new Date(Date.now()-720*60*1e3).toISOString(),vehicleType:`HTTP`,format:`yaml`},proxy:{name:`proxy`,type:`Rule`,behavior:`classical`,ruleCount:2345,updatedAt:new Date(Date.now()-360*60*1e3).toISOString(),vehicleType:`HTTP`,format:`yaml`}},ce=le();function le(){let e=[{host:`www.google.com`,ip:`142.250.185.14`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`google.com`},{host:`github.com`,ip:`140.82.121.4`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`github.com`},{host:`api.github.com`,ip:`140.82.121.6`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`github.com`},{host:`raw.githubusercontent.com`,ip:`185.199.108.133`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`githubusercontent.com`},{host:`www.youtube.com`,ip:`172.217.14.110`,proxy:`Streaming`,rule:`DOMAIN-SUFFIX`,rulePayload:`youtube.com`},{host:`i.ytimg.com`,ip:`172.217.14.118`,proxy:`Streaming`,rule:`DOMAIN-SUFFIX`,rulePayload:`ytimg.com`},{host:`api.openai.com`,ip:`104.18.12.191`,proxy:`AI Services`,rule:`DOMAIN-SUFFIX`,rulePayload:`openai.com`},{host:`chat.openai.com`,ip:`104.18.13.191`,proxy:`AI Services`,rule:`DOMAIN-SUFFIX`,rulePayload:`openai.com`},{host:`api.anthropic.com`,ip:`104.18.32.47`,proxy:`AI Services`,rule:`DOMAIN-SUFFIX`,rulePayload:`anthropic.com`},{host:`claude.ai`,ip:`104.18.33.47`,proxy:`AI Services`,rule:`DOMAIN-SUFFIX`,rulePayload:`claude.ai`},{host:`www.netflix.com`,ip:`54.74.73.31`,proxy:`Streaming`,rule:`DOMAIN-SUFFIX`,rulePayload:`netflix.com`},{host:`twitter.com`,ip:`104.244.42.1`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`twitter.com`},{host:`x.com`,ip:`104.244.42.65`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`x.com`},{host:`www.facebook.com`,ip:`157.240.1.35`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`facebook.com`},{host:`www.instagram.com`,ip:`157.240.1.174`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`instagram.com`},{host:`web.telegram.org`,ip:`149.154.167.99`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`telegram.org`},{host:`discord.com`,ip:`162.159.130.234`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`discord.com`},{host:`cdn.discordapp.com`,ip:`162.159.133.234`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`discordapp.com`},{host:`open.spotify.com`,ip:`35.186.224.25`,proxy:`Streaming`,rule:`DOMAIN-SUFFIX`,rulePayload:`spotify.com`},{host:`www.twitch.tv`,ip:`151.101.2.167`,proxy:`Streaming`,rule:`DOMAIN-SUFFIX`,rulePayload:`twitch.tv`},{host:`www.reddit.com`,ip:`151.101.1.140`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`reddit.com`},{host:`medium.com`,ip:`162.159.152.4`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`medium.com`},{host:`en.wikipedia.org`,ip:`208.80.154.224`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`wikipedia.org`},{host:`www.whatsapp.com`,ip:`157.240.1.60`,proxy:`Proxy`,rule:`DOMAIN-SUFFIX`,rulePayload:`whatsapp.com`},{host:`www.baidu.com`,ip:`110.242.68.66`,proxy:`DIRECT`,rule:`GEOIP`,rulePayload:`CN`},{host:`www.taobao.com`,ip:`140.205.94.189`,proxy:`DIRECT`,rule:`GEOIP`,rulePayload:`CN`},{host:`www.bilibili.com`,ip:`120.92.78.97`,proxy:`DIRECT`,rule:`GEOIP`,rulePayload:`CN`},{host:`www.zhihu.com`,ip:`103.41.167.234`,proxy:`DIRECT`,rule:`GEOIP`,rulePayload:`CN`}],t=[`Google Chrome`,`Safari`,`Firefox`,`Visual Studio Code`,`Electron`,`node`,`curl`,`Telegram`,`Discord`,`Spotify`],n=[[`Proxy`,`Auto Select`,`Hong Kong`],[`Proxy`,`Auto Select`,`Singapore`],[`Proxy`,`Auto Select`,`Japan`],[`Streaming`,`Japan`],[`Streaming`,`Hong Kong`],[`AI Services`,`United States`],[`DIRECT`]],r=[];for(let i=0;i<60;i++){let a=e[i%e.length],o=t[Math.floor(Math.random()*t.length)],s=a.proxy===`DIRECT`?[`DIRECT`]:n[Math.floor(Math.random()*(n.length-1))],c=Math.random()>.85;r.push({id:`conn-${i+1}`,metadata:{...V(a.host,a.ip,o),network:c?`udp`:`tcp`,type:c?`QUIC`:`HTTP Connect`,sourcePort:String(5e4+i)},upload:Math.floor(Math.random()*1024*1024),download:Math.floor(Math.random()*1024*1024*10),downloadSpeed:Math.floor(Math.random()*1024*500),uploadSpeed:Math.floor(Math.random()*1024*100),start:new Date(Date.now()-Math.floor(Math.random()*6e5)).toISOString(),chains:s,rule:a.rule,rulePayload:a.rulePayload})}return r}const ue=de();function de(){let e=[{type:r.Info,template:`[DNS] resolve {host} to {ip}`},{type:r.Info,template:`[TCP] {srcIP}:{srcPort} --> {host}:{destPort} match {rule}({payload}) using {proxy}`},{type:r.Info,template:`[UDP] {srcIP}:{srcPort} --> {host}:{destPort} match {rule}({payload}) using {proxy}`},{type:r.Debug,template:`[Proxy] {node} latency: {latency}ms`},{type:r.Warning,template:`[UDP] connection to {ip}:{destPort} timeout`},{type:r.Info,template:`[TUN] {srcIP} --> {host} using {proxy}`},{type:r.Debug,template:`[DNS] cache hit for {host}`},{type:r.Info,template:`[QUIC] {srcIP}:{srcPort} --> {host}:{destPort} match {rule}({payload}) using {proxy}`}],t=[`www.google.com`,`github.com`,`api.openai.com`,`www.youtube.com`,`twitter.com`,`www.netflix.com`,`discord.com`,`www.twitch.tv`,`open.spotify.com`,`www.reddit.com`,`medium.com`,`www.facebook.com`,`www.instagram.com`,`web.telegram.org`,`claude.ai`,`www.baidu.com`,`www.bilibili.com`],n=[`142.250.185.14`,`140.82.121.4`,`104.18.12.191`,`172.217.14.110`,`104.244.42.1`,`54.74.73.31`,`162.159.130.234`,`151.101.2.167`,`35.186.224.25`,`151.101.1.140`,`162.159.152.4`,`157.240.1.35`,`157.240.1.174`,`149.154.167.99`,`104.18.33.47`,`110.242.68.66`,`120.92.78.97`],i=[`Hong Kong`,`Singapore`,`Japan`,`United States`,`Taiwan`],a=[`Proxy[Auto Select(Hong Kong)]`,`Proxy[Auto Select(Singapore)]`,`Streaming[Japan]`,`AI Services[United States]`,`DIRECT`],o=[`DOMAIN-SUFFIX`,`DOMAIN-KEYWORD`,`GEOIP`,`IP-CIDR`,`MATCH`],s=[];for(let r=0;r<60;r++){let c=e[r%e.length],l=t[Math.floor(Math.random()*t.length)],u=n[Math.floor(Math.random()*n.length)],d=i[Math.floor(Math.random()*i.length)],f=a[Math.floor(Math.random()*a.length)],p=o[Math.floor(Math.random()*o.length)],m=c.template.replace(`{host}`,l).replace(`{ip}`,u).replace(`{srcIP}`,`192.168.1.100`).replace(`{srcPort}`,String(5e4+r)).replace(`{destPort}`,`443`).replace(`{node}`,d).replace(`{latency}`,String(50+Math.floor(Math.random()*150))).replace(`{proxy}`,f).replace(`{rule}`,p).replace(`{payload}`,l);s.push({type:c.type,payload:m})}return s}const fe={up:125e6,down:85e7},pe={inuse:45*1024*1024,oslimit:0};function J(){return{mockVersion:z,mockConfig:B,mockProxies:W,mockProxyProviders:G,mockRules:K,mockRuleProviders:se,mockConnections:ce,mockLogs:ue,mockTrafficStats:fe,mockMemory:pe}}function Y(){return t().public.mockMode===!0}function me(e){let n=t().public.mockMode===!0?J():null;if(!n)return{};let r=e.startsWith(`/`)?e.slice(1):e;if(r===`version`)return n.mockVersion;if(r===`configs`)return n.mockConfig;if(r===`proxies`)return{proxies:n.mockProxies};if(r===`providers/proxies`)return{providers:n.mockProxyProviders};if(r===`rules`){let e={};return n.mockRules.forEach((t,n)=>{e[`rule-${n}`]=t}),{rules:e}}if(r===`providers/rules`)return{providers:n.mockRuleProviders};if(r===`connections`)return{connections:n.mockConnections,downloadTotal:85e7,uploadTotal:125e6};if(r===`group`)return{groups:{}};if(r.startsWith(`proxies/`)){let e=decodeURIComponent(r.replace(`proxies/`,``));return n.mockProxies[e]||{}}if(r.startsWith(`providers/proxies/`)){let e=decodeURIComponent(r.replace(`providers/proxies/`,``));return n.mockProxyProviders[e]||{}}return{}}function X(){let t=e().currentEndpoint;if(Y()){let e=async e=>me(e);return{get:t=>({json:()=>e(t)}),post:t=>({json:()=>e(t)}),put:t=>({json:()=>e(t)}),patch:t=>({json:()=>e(t)}),delete:t=>({json:()=>e(t)})}}if(!t)return R.create({});let n=new Headers;return t.secret&&n.set(`Authorization`,`Bearer ${t.secret}`),R.create({prefixUrl:t.url,headers:n})}function Z(){let e=new Headers;return R.create({prefixUrl:`https://api.github.com`,headers:e})}function he(e,t){return R.get(e.endsWith(`/`)?`${e}version`:`${e}/version`,{headers:t?{Authorization:`Bearer ${t}`}:{}}).then(({ok:e})=>e).catch(e=>(console.error(e),!1))}function ge(){return X().delete(`connections`)}function _e(e){return X().delete(`connections/${e}`)}function ve(){return X().get(`providers/proxies`).json()}function ye(){return X().get(`proxies`).json()}function be(e){return X().put(`providers/proxies/${encodeURIComponent(e)}`)}function Q(e){return X().get(`providers/proxies/${encodeURIComponent(e)}/healthcheck`,{timeout:20*1e3}).json()}function $(e,t){return X().put(`proxies/${encodeURIComponent(e)}`,{body:JSON.stringify({name:t})})}function xe(e,t,n,r){let i=X();return t===``?i.get(`proxies/${encodeURIComponent(e)}/delay`,{searchParams:{url:n,timeout:r}}).json():Q(t).then(t=>({delay:t[e]??0}))}function Se(e,t,n){return X().get(`group/${encodeURIComponent(e)}/delay`,{searchParams:{url:t,timeout:n}}).json()}function Ce(){let e=n(!1),t=n(!1),r=n(!1),i=n(!1),a=n(!1),o=n(!1),s=n(!1),c=async()=>{let t=X();e.value=!0;try{await t.put(`configs`,{searchParams:{force:!0},json:{path:``,payload:``}})}catch{}e.value=!1},l=n(!1);return{reloadingConfigFile:e,updatingGEODatabases:t,flushingFakeIPData:r,flushingDNSCache:i,upgradingBackend:a,upgradingUI:o,restartingBackend:s,fetchingRemoteConfig:l,reloadConfigFileAPI:c,flushFakeIPDataAPI:async()=>{let e=X();r.value=!0;try{await e.post(`cache/fakeip/flush`)}catch{}r.value=!1},flushDNSCacheAPI:async()=>{let e=X();i.value=!0;try{await e.post(`cache/dns/flush`)}catch{}i.value=!1},updateGEODatabasesAPI:async()=>{let e=X();t.value=!0;try{await e.post(`configs/geo`)}catch{}t.value=!1},upgradeBackendAPI:async()=>{let e=X();a.value=!0;try{await e.post(`upgrade`)}catch{}a.value=!1},upgradeUIAPI:async()=>{let e=X();o.value=!0;try{await e.post(`upgrade/ui`)}catch{}o.value=!1},restartBackendAPI:async()=>{let e=X();s.value=!0;try{await e.post(`restart`)}catch{}s.value=!1},fetchRemoteConfigAPI:async e=>{let t=X();l.value=!0;try{let n=await(await R.get(e)).text();await t.put(`configs`,{searchParams:{force:!0},json:{path:``,payload:n}})}catch(e){throw console.error(`Failed to fetch remote config:`,e),e}finally{l.value=!1}}}}async function we(e){let{tag_name:t,body:n}=await Z().get(`repos/MetaCubeX/metacubexd/releases/latest`).json();return{isUpdateAvailable:t!==e,changelog:n}}async function Te(e){let t=Z(),n=`repos/MetaCubeX/mihomo`,r=/(alpha|beta|meta)-?(\w+)/.exec(e),i=async(e,r)=>{let{assets:i,body:a}=await t.get(`${n}/${e}`).json();return{isUpdateAvailable:!i.some(({name:e})=>e.includes(r)),changelog:a}};if(r){let e=r[2]||``,t=r[1]||``;return t===`meta`?await i(`releases/latest`,e):t===`alpha`?await i(`releases/tags/Prerelease-Alpha`,e):{isUpdateAvailable:!1}}let{tag_name:a,body:o}=await t.get(`${n}/releases/latest`).json();return{isUpdateAvailable:a!==e,changelog:o}}async function Ee(e,t=10){return(await Z().get(`repos/MetaCubeX/metacubexd/releases`,{searchParams:{per_page:t}}).json()).map(t=>({version:t.tag_name,changelog:t.body,publishedAt:t.published_at,isCurrent:t.tag_name===e}))}async function De(e,t=10){let n=Z(),r=`repos/MetaCubeX/mihomo`,i=/(alpha|beta|meta)-?(\w+)/.exec(e);if(!i){let i=await n.get(`${r}/releases`,{searchParams:{per_page:t}}).json();return i=i.filter(e=>!e.tag_name.includes(`Alpha`)&&!e.tag_name.includes(`Prerelease`)),i.map(t=>({version:t.tag_name,changelog:t.body,publishedAt:t.published_at,isCurrent:t.tag_name===e}))}let a=i[1]||``,o=i[2]||``,s=[];return a===`meta`?(s=await n.get(`${r}/releases`,{searchParams:{per_page:t}}).json(),s=s.filter(e=>!e.tag_name.includes(`Alpha`)&&!e.tag_name.includes(`Prerelease`))):a===`alpha`&&(s=await n.get(`${r}/releases`,{searchParams:{per_page:t*2}}).json(),s=s.filter(e=>e.tag_name.includes(`Alpha`)||e.tag_name.includes(`Prerelease`)).slice(0,t)),s.map(e=>({version:e.tag_name,changelog:e.body,publishedAt:e.published_at,isCurrent:e.assets?.some(({name:e})=>e.includes(o))??!1}))}export{X as _,De as a,ve as c,xe as d,Q as f,Y as g,Ce as h,_e as i,we as l,be as m,he as n,Ee as o,$ as p,ge as r,ye as s,Te as t,Se as u,J as v,R as y};